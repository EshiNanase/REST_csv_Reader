# REST_csv_Reader

Веб-сервис с использованием Django REST Framework. Сервис позволяет загружать csv файлы с информацией о купленных драгоценных камнях, а также возвращать информацию о 5 клиентах, потративших наибольшую сумму за весь период.

Реализованы следующие эндпоинты:
- POST: /upload_deal/
- GET: /top_five_customers/

POST-запрос на /upload_deal/ требует прикрепленный cdv файл. При данном запросе в базе данных создастся объект модели File, далее с помощью Celery создастся асинхронная задача для обработки файла, после чего в объект будет добавлен сам файл, а булево поле processed (по-умолчанию False) поменяется на True.

GET-запрос на /top_five_customers/ возвращает информацию о 5 клиентах, потративших наибольшую сумму за весь период.

## Как запустить

### Клонируйте код
```
git clone https://github.com/EshiNanase/REST_csv_Reader.git
```

### Создайте .env файл со следующими переменными окружения

- `SECRET_KEY` — секретный ключ проекта. Он отвечает за шифрование на сайте. Например, им зашифрованы все пароли на вашем сайте.
- `DEBUG` — дебаг-режим. Для разработки - `False`, для продакшена - `True`.
- `POSTGRES_DB` — название базы данных Postgres.
- `POSTGRES_USER` — имя юзера для входа в базу данных Postgres.
- `POSTGRES_PASSWORD` — пароль для входа под именем юзера сверху.

### Соберите образ Docker
```
docker compose build
```

### Запустите Docker
```
docker compose up
```

### Откройте сайт в браузере

Вы можете работать с сайтом, пользуясь графическим интерфейсом Swagger. Он находится по ссылке:
```
http://127.0.0.1:8000/docs/
```
